cmake_minimum_required (VERSION 3.27)
project (Qiskit)

# We are using CMake to build our C API test suite, and we leverage ctest to run
# those tests.
enable_testing ()

SET(C_DIR_LIB target/debug CACHE PATH "Path to the C API header")

message(STATUS "C_DIR_LIB: ${C_DIR_LIB}")

# The C API is provided by the qiskit_cext Rust crate. Its header gets
# generated by cbindgen (see `make cheader`).
find_library (qiskit qiskit_cext PATHS ${C_DIR_LIB} REQUIRED)

SET(C_DIR_INCLUDE dist/c/include CACHE PATH "Path to the C API header")

message(STATUS "C_DIR_INCLUDE: ${C_DIR_INCLUDE}")

# Generally include the directory for the ``qiskit.h`` file.
include_directories (${C_DIR_INCLUDE})

# The remaining CMake configuration is done inside of the C API test suite.
add_subdirectory (test/c)
