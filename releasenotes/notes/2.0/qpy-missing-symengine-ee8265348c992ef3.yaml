---
upgrade_qpy:
  - |
    The :func:`.qpy.load` function can now raise a
    :class:`.MissingOptionalLibrary` exception if a QPY v10, v11, or v12
    payload is passed in that uses ``symengine`` symbolic expressions
    and ``symengine`` is not installed. The exception is also raised if ``sympy`` is not installed for any
    other QPY payload prior to v13. In the Qiskit v1.x releases, ``symengine`` and ``sympy``
    were always guaranteed to be installed. However, starting in v2.x this is no longer 
    a hard requirement and may only be needed if you're deserializing a QPY
    file that was generated using ``symengine``. Parsing these QPY payloads
    requires ``symengine`` as its usage is part of the
    format specification for QPY v10, v11, and v12. If the payload requires
    it, installing a compatible version of ``symengine`` (``0.11.0`` or ``0.13.0``) 
    is the only option.
    Similarly, ``sympy`` was was used for :class:`.ParameterExpression` encoding
    for all QPY versions 1 - 12.
  - |
    The minimum QPY compatibility version, :attr:`.QPY_COMPATIBILITY_VERSION`,
    has been raised from 10 (the v1.x release requirement) to 13. This version controls
    the minimum version of QPY that can be emitted by the :func:`.qpy.dump`
    function. This means that :func:`.qpy.dump` can only emit QPY v13 and v14
    in this release. QPY v13 is still compatible with Qiskit v1.3.x and v1.4.x,
    which means that payloads generated in Qiskit v2.x with QPY v13 can still
    be loaded with the Qiskit v1.x release series.

    This change was necessary because QPY versions 10 -12 require either
    the ``sympy`` or ``symengine`` libraries to generate a serialization for
    :class:`.ParameterExpression` objects, but in Qiskit 2.x neither library
    is required for the :class:`.ParameterExpression` object.
upgrade_circuits:
  - |
    The :meth:`.ParameterExpression.sympify` method can now raise a
    :class:`.MissingOptionalLibrary` exception if ``sympy`` is not installed.
    In the Qiskit v1.x releases, ``sympy`` was always guaranteed to be installed,
    but starting in v2.0.0, this is no longer a hard requirement and may only be
    needed if you are using this method. Because this functionality explicitly
    requires ``sympy`` you need to ensure you have ``sympy`` installed
    to use the method.
upgrade_visualization:
  - |
    The :func:`.array_to_latex` function and :meth:`.Operator.draw` method can now
    raise a :class:`.MissingOptionalLibrary` exception if the ``sympy``
    library is not installed. In the Qiskit v1.x releases, ``symengine`` and ``sympy``
    were always guaranteed to be installed, but starting in v2.0.0, this is no
    longer a hard requirement. The LaTeX visualization for a matrix relies
    on the ``sympy`` library, so if you're using this functionality,
    ensure that you have ``sympy`` installed.
