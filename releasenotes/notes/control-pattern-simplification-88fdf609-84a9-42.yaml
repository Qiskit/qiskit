---
features:
  - |
    Added a new transpiler pass :class:`~.ControlPatternSimplification` that optimizes
    multi-controlled gates with complementary control patterns using bitwise pattern
    analysis. This pass can significantly reduce gate counts in quantum circuits
    that use parametric controlled gates.

    The pass supports any parametric controlled gate (e.g., RX, RY, RZ, Phase gates)
    with identical parameters and applies four types of optimizations:

    * **Complementary patterns**: Patterns like ``['11', '01']`` simplify to a single
      control qubit, reducing 2 multi-controlled gates to 1 single-controlled gate.

    * **Subset patterns**: Patterns like ``['111', '110']`` reduce the number of control
      qubits by eliminating redundant controls.

    * **XOR patterns**: Patterns like ``['110', '101']`` are optimized using CNOT gates,
      reducing complexity while maintaining quantum equivalence.

    * **Complete partitions**: When all control states are covered (e.g., ``['00','01','10','11']``),
      the result is an unconditional gate with no controls.

    Example usage::

        from qiskit import QuantumCircuit
        from qiskit.circuit.library import RXGate
        from qiskit.transpiler.passes import ControlPatternSimplification
        import numpy as np

        # Create circuit with complementary control patterns
        theta = np.pi / 4
        qc = QuantumCircuit(3)
        qc.append(RXGate(theta).control(2, ctrl_state='11'), [0, 1, 2])
        qc.append(RXGate(theta).control(2, ctrl_state='01'), [0, 1, 2])

        # Apply optimization (reduces to single CRX gate controlled by q0)
        pass_ = ControlPatternSimplification()
        optimized_qc = pass_(qc)

    For circuits generated by graph-based quantum algorithms (e.g., continuous-time
    quantum walks), this optimization can reduce gate overhead by over 500% in some cases.