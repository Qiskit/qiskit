---
fixes:
  - |
    The control-flow builder interface now supports using :class:`.ClassicalRegister`\ s
    as conditions in nested control-flow scopes.  Previously, doing this would
    not raise an error immediately, but the internal circuit blocks would not
    have the correct registers defined, and so later logic that worked with the
    inner blocks would fail.

    For example, previously the drawers would fail when trying to draw an inner
    block conditioned on a classical register, whereas now it will succeed, such
    as in this example::

        from qiskit import QuantumCircuit
        from qiskit.circuit import QuantumRegister, ClassicalRegister

        qreg = QuantumRegister(4)
        creg = ClassicalRegister(1)
        circ = QuantumCircuit(qreg, creg)

        with circ.for_loop(range(10)) as a:
            circ.ry(a, 0)
            with circ.if_test((creg, 1)):
                circ.break_loop()

        print(circ.draw(cregbundle=False))
        print(circ.data[0][0].blocks[0].draw(cregbundle=False))
